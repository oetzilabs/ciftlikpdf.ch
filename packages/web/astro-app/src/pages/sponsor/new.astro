---
import { API_URL } from "../../consts";
import MainLayout from "../../layouts/MainLayout.astro";
import { NewSponsorFormWrapper } from "../../components/NewSponsorForm";

const session = Astro.cookies.get("session")?.value;
if (!session) {
  const redirect = encodeURIComponent(Astro.url.pathname);
  return Astro.redirect(`/login?redirect=${redirect}`);
}
---

<MainLayout>
  <div class="flex flex-col gap-4">
    <h1 class="text-3xl font-bold">Yeni Sponsor</h1>
    <NewSponsorFormWrapper API_URL={API_URL} client:load session={session} />
  </div>
</MainLayout>
